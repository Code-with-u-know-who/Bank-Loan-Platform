<div class="row mb-4">
    <div class="col-12">
        <h2><i class="fas fa-calculator me-2"></i>EMI Calculator</h2>
        <p class="text-muted">Calculate your Equated Monthly Installments and plan your loan.</p>
    </div>
</div>

<div class="row">
    <div class="col-lg-6">
        <div class="calculator-container">
            <h4 class="mb-4">Loan Calculator</h4>
            <form id="emiCalculatorForm">
                <div class="mb-4">
                    <label class="form-label">Loan Type</label>
                    <select class="form-select" id="loanType" onchange="updateLoanTypeDetails()"></select>
                </div>
                <div class="mb-4">
                    <label for="principalAmount" class="form-label">Loan Amount <span class="text-muted">(₹)</span></label>
                    <input type="number" class="form-control" id="principalAmount" required min="10000" max="10000000" step="1000">
                    <div class="form-text" id="amountRangeText"></div>
                </div>
                <div class="mb-4">
                    <label for="interestRate" class="form-label">Interest Rate <span class="text-muted">(%)</span></label>
                    <input type="number" class="form-control" id="interestRate" required min="1" max="25" step="0.1">
                    <div class="form-text" id="interestRateText"></div>
                </div>
                <div class="mb-4">
                    <label for="loanTenure" class="form-label">Loan Tenure <span class="text-muted">(Months)</span></label>
                    <input type="number" class="form-control" id="loanTenure" required min="12" max="360" step="1">
                    <div class="form-text" id="tenureRangeText"></div>
                </div>
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary btn-lg">Calculate EMI</button>
                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="clearCalculator()">Reset</button>
                </div>
            </form>
        </div>
    </div>
    <div class="col-lg-6 mt-4 mt-lg-0">
        <div class="card h-100 shadow-sm" style="display:none;" id="resultsCard">
            <div class="card-body">
                <h4 class="card-title mb-4">Calculation Results</h4>
                <div class="row text-center mb-4">
                    <div class="col-md-4">
                        <div class="result-box p-3 border rounded">
                            <h6 class="text-muted">Monthly EMI</h6>
                            <h3 class="text-primary" id="monthlyEmi">₹0</h3>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="result-box p-3 border rounded">
                            <h6 class="text-muted">Total Interest</h6>
                            <h3 class="text-success" id="totalInterest">₹0</h3>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="result-box p-3 border rounded">
                            <h6 class="text-muted">Total Payment</h6>
                            <h3 class="text-info" id="totalPayment">₹0</h3>
                        </div>
                    </div>
                </div>
                <div class="d-grid">
                    <button class="btn btn-sm btn-outline-secondary" type="button" onclick="toggleSchedule('amortizationScheduleCard', this)">
                        <i class="fas fa-eye me-1"></i>Show Amortization Schedule
                    </button>
                </div>
            </div>
        </div>
        <div class="card mt-3 shadow-sm" style="display:none;" id="amortizationScheduleCard">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="card-title mb-0">Amortization Schedule</h5>
                    <button class="btn btn-sm btn-outline-success" onclick="downloadSchedule()">
                        <i class="fas fa-download me-1"></i>Download CSV
                    </button>
                </div>
                <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
                    <table class="table table-striped table-sm" id="amortizationTable">
                        <thead>
                        <tr>
                            <th>Month</th>
                            <th>Opening Balance</th>
                            <th>EMI</th>
                            <th>Principal</th>
                            <th>Interest</th>
                            <th>Closing Balance</th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>